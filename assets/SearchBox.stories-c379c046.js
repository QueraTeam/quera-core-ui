import{j as r,a as f,F as Y}from"./chunk-UQDW7KKV-fae5f941.js";import{r as m}from"./index-e03f90b5.js";import{p as F}from"./string-e261e839.js";import{f as x,o as Z,a as L,c as k}from"./chunk-ZJJGQIVY-893c3ba0.js";import{r as ee,g as te,a as re}from"./chunk-TXZFUZNG-c6b463a0.js";import{T as ne}from"./chunk-KICXRNWJ-1cc33b14.js";import{M,k as oe,l as ae}from"./MdIcon-6f8a77da.js";import{E as se}from"./Empty-c54e3014.js";import{c as ie}from"./index-fc8d46d4.js";import{g as le}from"./chunk-ZHMYA64R-d863deb5.js";import{a as ce}from"./chunk-TKWR62NH-579b21da.js";import{c as ue,T}from"./chunk-2OOHT3W5-4179f394.js";import{I as pe}from"./chunk-6CVSDS6C-407bba31.js";import{D as O}from"./chunk-W7WUSNWJ-c80d0ae7.js";import{V as de}from"./chunk-NTCQBYKE-16631f91.js";import{S as me}from"./chunk-5PH6ULNP-4a67f1fe.js";import{u as he}from"./chunk-CHB4ZXZG-817618a3.js";import{C as A}from"./chunk-YQO7BFFX-f5f4f3a8.js";import{B as W}from"./chunk-UVUR7MCU-81f32226.js";import{H as fe}from"./chunk-3ASUQ6PA-40f495ea.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-be2201a4.js";import"./_commonjsHelpers-725317a4.js";import"./emotion-react.browser.esm-cc9fe6e8.js";import"./chunk-3XANSPY5-d7663624.js";import"./index-ac92abf8.js";import"./index-d844c8a1.js";import"./index-24d62b6f.js";import"./index-c1a84d6e.js";import"./tslib.es6-182fcfb5.js";import"./chunk-2GBDXOMA-b5a1e0ac.js";import"./chunk-KRPLQIP4-87875c98.js";import"./chunk-PULVB27S-95142386.js";import"./chunk-XRMX4GAI-92ddb344.js";import"./chunk-O3SWHQEE-3b2533e4.js";import"./chunk-UBPTU7WB-1ebcafcb.js";var[ge,ye]=ie({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),$=x(function(t,o){const n=ce("Input",t),{children:a,className:u,...S}=Z(t),g=L("chakra-input__group",u),s={},y=le(a),p=n.field;y.forEach(i=>{var h,l;n&&(p&&i.type.id==="InputLeftElement"&&(s.paddingStart=(h=p.height)!=null?h:p.h),p&&i.type.id==="InputRightElement"&&(s.paddingEnd=(l=p.height)!=null?l:p.h),i.type.id==="InputRightAddon"&&(s.borderEndRadius=0),i.type.id==="InputLeftAddon"&&(s.borderStartRadius=0))});const d=y.map(i=>{var h,l;const v=ue({size:((h=i.props)==null?void 0:h.size)||t.size,variant:((l=i.props)==null?void 0:l.variant)||t.variant});return i.type.id!=="Input"?m.cloneElement(i,v):m.cloneElement(i,Object.assign(v,s,i.props))});return r(k.div,{className:g,ref:o,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...n.group},"data-group":!0,...S,children:r(ge,{value:n,children:d})})});$.displayName="InputGroup";var ve=k("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),N=x(function(t,o){var n,a;const{placement:u="left",...S}=t,g=ye(),s=g.field,p={[u==="left"?"insetStart":"insetEnd"]:"0",width:(n=s==null?void 0:s.height)!=null?n:s==null?void 0:s.h,height:(a=s==null?void 0:s.height)!=null?a:s==null?void 0:s.h,fontSize:s==null?void 0:s.fontSize,...g.element};return r(ve,{ref:o,__css:p,...S})});N.id="InputElement";N.displayName="InputElement";var K=x(function(t,o){const{className:n,...a}=t,u=L("chakra-input__left-element",n);return r(N,{ref:o,placement:"left",className:u,...a})});K.id="InputLeftElement";K.displayName="InputLeftElement";var B=x(function(t,o){const{className:n,...a}=t,u=L("chakra-input__right-element",n);return r(N,{ref:o,placement:"right",className:u,...a})});B.id="InputRightElement";B.displayName="InputRightElement";var P=e=>r(k.circle,{cx:50,cy:50,r:42,fill:"transparent",...e});P.displayName="Circle";var X=e=>{const{size:t,isIndeterminate:o,...n}=e;return r(k.svg,{viewBox:"0 0 100 100",__css:{width:t,height:t,animation:o?`${ee} 2s linear infinite`:void 0},...n})};X.displayName="Shape";var J=x((e,t)=>{var o;const{size:n="48px",max:a=100,min:u=0,valueText:S,getValueText:g,value:s,capIsRound:y,children:p,thickness:d="10px",color:i="#0078d4",trackColor:h="#edebe9",isIndeterminate:l,...v}=e,_=te({min:u,max:a,value:s,valueText:S,getValueText:g,isIndeterminate:l}),I=l?void 0:((o=_.percent)!=null?o:0)*2.64,z=I==null?void 0:`${I} ${264-I}`,b=l?{css:{animation:`${re} 1.5s linear infinite`}}:{strokeDashoffset:66,strokeDasharray:z,transitionProperty:"stroke-dasharray, stroke",transitionDuration:"0.6s",transitionTimingFunction:"ease"},R={display:"inline-block",position:"relative",verticalAlign:"middle",fontSize:n};return f(k.div,{ref:t,className:"chakra-progress",..._.bind,...v,__css:R,children:[f(X,{size:n,isIndeterminate:l,children:[r(P,{stroke:h,strokeWidth:d,className:"chakra-progress__track"}),r(P,{stroke:i,strokeWidth:d,className:"chakra-progress__indicator",strokeLinecap:y?"round":void 0,opacity:_.value===0&&!l?0:void 0,...b})]}),p]})});J.displayName="CircularProgress";const D=({solvedPercent:e})=>{let t;switch(e){case 100:t="حل کامل";break;case null:t="بدون تلاش";break;default:t=`حل ناتمام: ٪${F(e)} نمره`;break}return r(ne,{label:t,children:r("span",{children:r(J,{value:e===null?0:Math.max(e,10),size:6,color:e===100?"green.400":"brand.400",trackColor:"gray.300"})})})};try{D.displayName="ProblemIcon",D.__docgenInfo={description:"",displayName:"ProblemIcon",props:{solvedPercent:{defaultValue:null,description:"",name:"solvedPercent",required:!0,type:{name:"number"}}}}}catch{}const Se=(e,t)=>{const[o,n]=m.useState(e);return m.useEffect(()=>{const a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),o},Ie=({searching:e,canClearSearch:t,handleClearSearch:o})=>{let n;return e?n=r(me,{}):t?n=r(M,{icon:oe,cursor:"pointer",boxSize:6,onClick:()=>{o()}}):n=r(M,{icon:ae,boxSize:6}),r(B,{children:n})},w=({searchHandler:e,renderResultItem:t,emptyMessage:o,placeholder:n,value:a,setValue:u,onShowAllResults:S,onClearSearch:g,emptyImage:s})=>{const[y,p]=m.useState(!1),d=he(),i=Se(a,800),[h,l]=m.useState(null),v=m.useRef(null),_=c=>{c&&(p(!0),d.onOpen()),u(c)},I=c=>{v.current&&!v.current.contains(c.target)&&(d.onClose(),["click","keydown"].forEach(U=>{document.removeEventListener(U,I)}))},z=()=>{d.onOpen(),["click","keydown"].forEach(c=>{document.addEventListener(c,I)})},b=()=>{d.onClose(),S()},R=()=>{l(null),d.onClose(),u(""),u&&g()},q=m.useRef(!0);m.useEffect(()=>{if(q.current){q.current=!1;return}!a&&!d.isOpen&&R()},[a]),m.useEffect(()=>{i.length!==0&&e(i).then(c=>{l(c),p(!1)})},[i]);const Q=a.length>0&&y,E=d.isOpen&&i.length>0&&!y,V=E&&h?h:[];return f(A,{ref:v,position:"relative",borderRadius:"xl",boxShadow:"unset",children:[f($,{zIndex:"dropdown",size:"lg",children:[r(Ie,{searching:Q,canClearSearch:a.length>0,handleClearSearch:R}),r(pe,{value:a,onChange:c=>_(c.target.value),onKeyDown:c=>c.key==="Enter"&&b(),onFocus:z,placeholder:n,fontSize:"md",borderBottomLeftRadius:E?0:void 0,borderBottomRightRadius:E?0:void 0})]}),r(A,{boxShadow:"2xl",display:E?"block":"none",position:"absolute",w:"full",top:0,pt:12,zIndex:"docked",children:V.length>0?f(Y,{children:[r(O,{}),r(de,{spacing:0,align:"stretch",children:V.map(c=>t(c))}),r(O,{}),V.length>0&&f(W,{variant:"ghost",size:"lg",fontWeight:"normal",w:"full",px:4,h:14,colorScheme:"gray",justifyContent:"start",borderRadius:0,onClick:b,textOverflow:"ellipsis",overflow:"hidden",children:["نمایش همه نتایج برای جستجوی"," ",f(T,{as:"strong",mx:2,color:"text.brand",children:["«",a,"»"]})]})]}):r(se,{size:"sm",message:o,emptyImage:s})})]})};try{w.displayName="SearchBox",w.__docgenInfo={description:"",displayName:"SearchBox",props:{searchHandler:{defaultValue:null,description:"",name:"searchHandler",required:!0,type:{name:"(searchTerm: string) => Promise<any[]>"}},renderResultItem:{defaultValue:null,description:"",name:"renderResultItem",required:!0,type:{name:"(any: any) => ReactNode"}},emptyMessage:{defaultValue:null,description:"",name:"emptyMessage",required:!0,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},setValue:{defaultValue:null,description:"",name:"setValue",required:!0,type:{name:"Dispatch<SetStateAction<string>>"}},onShowAllResults:{defaultValue:null,description:"",name:"onShowAllResults",required:!0,type:{name:"() => void"}},onClearSearch:{defaultValue:null,description:"",name:"onClearSearch",required:!0,type:{name:"() => void"}},emptyImage:{defaultValue:null,description:"",name:"emptyImage",required:!0,type:{name:"ReactNode"}}}}}catch{}const at={component:w,parameters:{controls:{exclude:/renderResultItem|searchHandler|setValue|value|emptyImage/g}}},_e={problems:[{pk:1,url:"",solved_percent:43,name:"لورم ایپسوم متن ساختگی با تولید سادگی",solved_count:134},{pk:2,url:"",solved_percent:55,name:"لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از",solved_count:321},{pk:3,url:"",solved_percent:100,name:"لورم ایپسوم متن ساختگی",solved_count:423},{pk:4,url:"",solved_percent:12,name:"لورم ایپسوم متن ساختگی با تولید سادگی",solved_count:10}]},xe=e=>r(W,{as:"a",variant:"ghost",colorScheme:"gray",borderRadius:0,justifyContent:"start",fontWeight:"normal",leftIcon:r(D,{solvedPercent:e.solved_percent}),px:4,overflowX:"hidden",children:f(fe,{flexGrow:1,spacing:4,align:"stretch",alignItems:"center",minW:0,justify:"space-between",children:[r(T,{as:"span",textOverflow:"ellipsis",overflow:"hidden",children:e.name}),f(T,{as:"span",color:"text.pale.extra",fontSize:"sm",children:[F(e.solved_count)," حل"]})]})},e.pk),ke=e=>{const t=async()=>_e.problems,[o,n]=m.useState("");return r(w,{placeholder:"جستجوی نام یا شماره سؤال...",emptyMessage:"سوالی یافت نشد",renderResultItem:xe,searchHandler:t,setValue:n,value:o,emptyImage:r("img",{src:"/images/empty.png",alt:"Not found",width:300,height:256}),...e})},C={render:e=>r(ke,{...e}),argTypes:{onClearSearch:{action:"cleared"},onShowAllResults:{action:"show all results"}}};var G,j,H;C.parameters={...C.parameters,docs:{...(G=C.parameters)==null?void 0:G.docs,source:{originalSource:`{
  render: args => <CompleteSearchBox {...args} />,
  argTypes: {
    onClearSearch: {
      action: "cleared"
    },
    onShowAllResults: {
      action: "show all results"
    }
  }
}`,...(H=(j=C.parameters)==null?void 0:j.docs)==null?void 0:H.source}}};const st=["Primary"];export{C as Primary,st as __namedExportsOrder,at as default};
//# sourceMappingURL=SearchBox.stories-c379c046.js.map
